# 环境配置指南

## 一、使用说明

这里我们详细介绍了环境配置的每一步骤，针对不同的情况，我们提供了不同的配置指南。

整个指南包括两部分，第一部分是全新环境配置指南，第二部分是通用环境配置。

对于完全没配置过环境的**新手**或者新一个**新的服务器**（如阿里云）来说可以按照`全新环境配置指南`进行配置。

对于已经有**一定经验**的用户，或者**本地安装有环境基础**，则可以采用`通用环境配置`。

## 二、全新环境配置指南

### 基础环境配置(配置 git 和 conda)

1. 生成 ssh key
`ssh-keygen -t rsa -C "youremail@example.com"`
2. 将公钥添加到 github
`cat ~/.ssh/id_rsa.pub`
复制输出内容，打开 github，点击右上角头像，选择 `settings` -> `SSH and GPG keys` -> `New SSH key`，将复制的内容粘贴到 key 中，点击 `Add SSH key`。
![添加 ssh key 到 github](../figures/C1-1-github_ssh.png)

3. 安装 conda 环境
   1. linux 环境（通常采用 linux 环境）
      1. 安装：

         ```shell
         mkdir -p ~/miniconda3
         wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh -O ~/miniconda3/miniconda.sh
         bash ~/miniconda3/miniconda.sh -b -u -p ~/miniconda3
         rm -rf ~/miniconda3/miniconda.sh
         ```

      2. 初始化：

         ```shell
         ~/miniconda3/bin/conda init bash
         ~/miniconda3/bin/conda init zsh
         ```

      3. 新建终端，检查 conda 是否安装成功 `conda --version`
   2. macOS 环境
      1. 安装

            ```shell
            mkdir -p ~/miniconda3
            curl https://repo.anaconda.com/miniconda/Miniconda3-latest-MacOSX-arm64.sh -o ~/miniconda3/miniconda.sh
            bash ~/miniconda3/miniconda.sh -b -u -p ~/miniconda3
            rm -rf ~/miniconda3/miniconda.sh
            ```

      2. 初始化：

            ```shell
            ~/miniconda3/bin/conda init bash
            ~/miniconda3/bin/conda init zsh
            ```

      3. 新建终端，检查 conda 是否安装成功 `conda --version`
   3. windows 环境
      1. 下载：`curl https://repo.anaconda.com/miniconda/Miniconda3-latest-Windows-x86_64.exe -o miniconda.exe`
      2. 安装：点击下载好的`miniconda.exe`，安装指引进行安装
      3. 打开菜单中的 Anaconda Prompt，检查 conda 是否安装成功`conda --version`
      4. 删除安装包：`del miniconda.exe`

4. 新建虚拟环境
`conda create -n llm-universe python=3.10`
5. 激活虚拟环境
`conda activate llm-universe`
6. 在希望存储项目的路径下克隆当前仓库
`git clone git@github.com:datawhalechina/llm-universe.git`
7. 将目录切换到 llm-universe
`cd llm-universe`
8. 安装所需的包 `pip install -r requirements.txt`
通常可以通过清华源加速安装 `pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple`

## 三、通用环境配置

1. 新建虚拟环境
`conda create -n llm-universe python=3.10`
2. 激活虚拟环境
`conda activate llm-universe`
3. 在希望存储项目的路径下克隆当前仓库
`git clone git@github.com:datawhalechina/llm-universe.git`
4. 将目录切换到 llm-universe
`cd llm-universe`
5. 安装所需的包
`pip install -r requirements.txt`
通常可以通过清华源加速安装
`pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple`

## 四、VSCode 配置 Python 环境

1. 安装 Python 插件

   本教程基于 Python 语言开发， 为了更好的开发体验，我们需要安装 Python 插件。

   在插件市场中搜索`Python`，找到`Python`插件并安装。
   ![](../figures/C1-6-python_plugin.png)
   这时当我们执行 Python 代码时，就会自动识别我们的 Python 环境，并提供代码补全等功能，方便我们进行开发。

2. 安装 Jupyter 插件
   本教程中，我们使用 Jupyter Notebook 进行开发，所以需要安装 Jupyter 插件。
   在插件市场中搜索`Jupyter`，找到`Jupyter`插件并安装。
   ![](../figures/C1-6-jupyter_plugin.png)

3. 为 Jupyter Notebook 配置 Python 环境
   1. 打开一个 Jupyter Notebook
   2. 点击右上角的 `选择 Python 解释器（显示内容会根据选择环境的名称变化）`，进行当前 Jupyter Notebook 的 Python 环境的选择。
   ![](../figures/C1-6-jupyter_python.png)
   3. 点击`选择 Python` 后进入环境列表，并选择我们配置好的环境 `llm-universe`。
   ![](../figures/C1-6-jupyter_env_list.png)

   之后我们就可以在 Jupyter Notebook 中使用我们的 Python 环境进行开发了。
